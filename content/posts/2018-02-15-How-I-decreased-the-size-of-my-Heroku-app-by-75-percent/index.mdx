---
title: How I decreased the size of my Heroku app by 75 percent
author: Mario Hoyos
date: 2018-02-15
hero: ./images/laptopga.jpeg
excerpt: Have you checked the size of your Heroku application’s javascript and css bundles? If you haven’t you might be in for a shock.
---

_Originally written for [CodeBurst](https://codeburst.io/how-i-decreased-the-size-of-my-heroku-app-by-75-1a4cf329b0ab)_

Have you checked the size of your [Heroku](https://heroku.com/) application’s javascript and css bundles? If you haven’t you might be in for a shock.

I was hard at work on optimizing a website I built and deployed on Heroku, when I realized that there was a pretty large discrepancy in the expected size of the my application. I was crawling through my Chrome devtools and saw the following:

<div className="Image__Small">
  <img
    src="./images/before-zip.png"
    title="chrome devtools snapshopt showing javascript bundle of 679 kilobytes"
    alt="chrome devtools snapshopt showing javascript bundle of 679 kilobytes"
  />
</div>

Woah. Way too big.

My main css and javascript files combined for a whopping 759kb!

I knew this couldn’t be right, because when I ran my React application’s production build script, it told me that the javascript and css bundles should be significantly smaller:

<div className="Image__Small">
  <img
    src="./images/after-zip.png"
    title="cli snapshot showing javascript bundle of 179 kilobytes"
    alt="cli snapshot showing javascript bundle of 179 kilobytes"
  />
</div>

This looks a hell of a lot better.

So what’s the deal here?

It’s worth noting that the advertised bundle size above states the size of the files after gzipping.

I had no clue what gzip was, so I started googling it. Turns out that [it is a compression process that is usually executed automatically by the server for compatible browsers](https://stackoverflow.com/questions/16691506/what-is-gzip-compression).

After some more digging around I realized that Heroku applications do not provide this gzip functionality out of the box. I love Heroku, but I had to do something about this.

I am running a [Node/Express](https://expressjs.com/) server, but what I stumbled across next is almost-certainly available in whatever environment you’re serving your application.

Some further investigation led me to this, [a compression module created and maintained by the fine folks at ExpressJs themselves](https://github.com/expressjs/compression)!

I went ahead and dropped the following code in my server, before serving up the static files:

```javascript
const compression = require("compression");
const app = express();
app.use(compression());
```

**No joke**, that is literally all it took.

I ran my build process again, deployed to Heroku once more, and lo and behold !— My application’s bundles shrank by 75%.

<div className="Image__Small">
  <img
    src="./images/browser-results.png"
    title="chrome devtools snapshot showing total bundles of 184 kilobytes"
    alt="chrome devtools snapshot showing total bundles of 184 kilobytes"
  />
</div>

The improvements in your site’s load times are well worth the small amount of effort it takes to gzip your Heroku application. I ran my new and improved site through [Google’s speed test](https://developers.google.com/speed/pagespeed/insights/) and it improved my scores significantly.

I hope you found this helpful and I wish you all the best in your development journey!
